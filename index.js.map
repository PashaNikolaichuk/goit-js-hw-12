{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46831416-189b424aaa4e35cb9d06aecea';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nlet page = 1;\n\nexport async function getImageData(search = '', page = 1) {\n  const { data } = await axios(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: search,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n    },\n  });\n  return data;\n}\n","export function createMarkup(images) {\n  return images\n    .map(\n      image => `\n      <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a>\n        <div class=\"info\">\n        <div class=\"info-item\">\n        <h3>Likes</h3>\n        <p> ${image.likes}</p>\n        </div>\n        <div class=\"info-item\">\n        <h3>Views</h3>\n        <p>  ${image.views}</p>\n        </div>\n        <div class=\"info-item\">\n        <h3>Comments</h3>\n        <p> ${image.comments}</p>\n        </div>\n        <div class=\"info-item\">\n        <h3>Downloads</h3>\n        <p> ${image.downloads}</p>\n        </div>   \n        </div>\n        \n      </li>\n    `\n    )\n    .join('');\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImageData } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nconst form = document.querySelector('.form-send-js');\nconst list = document.querySelector('.list-js');\nconst loadMore = document.querySelector('.btn-load');\nconst lightbox = new SimpleLightbox('.gallery-item a');\n\nform.addEventListener('submit', handleSubmit);\nloadMore.addEventListener('click', onLoadMore);\n\nlet page = 1;\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  const searchQuery = event.target.elements.search.value.trim();\n  if (!searchQuery) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search query.' });\n    return;\n  }\n\n  page = 1;\n  list.innerHTML = '';\n\n  try {\n    const data = await getImageData(searchQuery, page);\n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: 'No results',\n        position: 'topRight',\n        backgroundColor: '#ff4d4f',\n        message:\n          'Sorry, there are no images matching your search query. Please, try again!',\n      });\n    } else {\n      list.innerHTML = createMarkup(data.hits);\n      lightbox.refresh();\n\n      if (data.hits.length < data.totalHits) {\n        loadMore.classList.remove('hidden');\n      } else {\n        loadMore.classList.add('hidden');\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Try again.',\n    });\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n  loadMore.disabled = true;\n\n  try {\n    const searchQuery = form.elements.search.value.trim();\n    const data = await getImageData(searchQuery, page);\n    list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    lightbox.refresh();\n\n    if (data.hits.length >= data.totalHits) {\n      loadMore.classList.add('hidden');\n    }\n\n    const card = document.querySelector('.gallery-item');\n    if (card) {\n      const cardHeight = card.getBoundingClientRect().height;\n\n      window.scrollBy({\n        left: 0,\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load more images. Try again.',\n    });\n  } finally {\n    loadMore.disabled = false;\n  }\n}\n"],"names":["API_KEY","BASE_URL","getImageData","search","page","data","axios","createMarkup","images","image","form","list","loadMore","lightbox","SimpleLightbox","handleSubmit","onLoadMore","event","searchQuery","iziToast","card","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAIV,eAAeC,EAAaC,EAAS,GAAIC,EAAO,EAAG,CACxD,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,GAAGL,CAAQ,GAAI,CAC1C,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,CACD,CACL,CAAG,EACD,OAAOC,CACT,CCnBO,SAASE,EAAaC,EAAQ,CACnC,OAAOA,EACJ,IACCC,GAAS;AAAA;AAAA,mBAEIA,EAAM,aAAa;AAAA,4CACMA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,cAKpEA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,eAIVA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,cAIZA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,cAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,KAMxB,EACA,KAAK,EAAE,CACZ,CCvBA,MAAMC,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAW,SAAS,cAAc,WAAW,EAC7CC,EAAW,IAAIC,EAAe,iBAAiB,EAErDJ,EAAK,iBAAiB,SAAUK,CAAY,EAC5CH,EAAS,iBAAiB,QAASI,CAAU,EAE7C,IAAIZ,EAAO,EAEX,eAAeW,EAAaE,EAAO,CACjCA,EAAM,eAAc,EAEpB,MAAMC,EAAcD,EAAM,OAAO,SAAS,OAAO,MAAM,OACvD,GAAI,CAACC,EAAa,CAChBC,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,8BAA8B,CAAE,EAC1E,MACD,CAEDf,EAAO,EACPO,EAAK,UAAY,GAEjB,GAAI,CACF,MAAMN,EAAO,MAAMH,EAAagB,EAAad,CAAI,EAC7CC,EAAK,KAAK,SAAW,EACvBc,EAAS,KAAK,CACZ,MAAO,aACP,SAAU,WACV,gBAAiB,UACjB,QACE,2EACV,CAAO,GAEDR,EAAK,UAAYJ,EAAaF,EAAK,IAAI,EACvCQ,EAAS,QAAO,EAEZR,EAAK,KAAK,OAASA,EAAK,UAC1BO,EAAS,UAAU,OAAO,QAAQ,EAElCA,EAAS,UAAU,IAAI,QAAQ,EAGpC,MAAe,CACdO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACf,CAAK,CACF,CACH,CAEA,eAAeH,GAAa,CAC1BZ,GAAQ,EACRQ,EAAS,SAAW,GAEpB,GAAI,CACF,MAAMM,EAAcR,EAAK,SAAS,OAAO,MAAM,OACzCL,EAAO,MAAMH,EAAagB,EAAad,CAAI,EACjDO,EAAK,mBAAmB,YAAaJ,EAAaF,EAAK,IAAI,CAAC,EAC5DQ,EAAS,QAAO,EAEZR,EAAK,KAAK,QAAUA,EAAK,WAC3BO,EAAS,UAAU,IAAI,QAAQ,EAGjC,MAAMQ,EAAO,SAAS,cAAc,eAAe,EACnD,GAAIA,EAAM,CACR,MAAMC,EAAaD,EAAK,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACd,KAAM,EACN,IAAKC,EAAa,EAClB,SAAU,QAClB,CAAO,CACF,CACF,MAAe,CACdF,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wCACf,CAAK,CACL,QAAY,CACRP,EAAS,SAAW,EACrB,CACH"}