{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46831416-189b424aaa4e35cb9d06aecea';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImageData(search = '', page = 1) {\n  const { data } = await axios(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: search,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 100,\n    },\n  });\n  return data;\n}\n","export function createMarkup(images) {\n  return images\n    .map(\n      image => `\n      <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a>\n        <div class=\"info\">\n        <div class=\"info-item\">\n        <h3>Likes</h3>\n        <p> ${image.likes}</p>\n        </div>\n        <div class=\"info-item\">\n        <h3>Views</h3>\n        <p>  ${image.views}</p>\n        </div>\n        <div class=\"info-item\">\n        <h3>Comments</h3>\n        <p> ${image.comments}</p>\n        </div>\n        <div class=\"info-item\">\n        <h3>Downloads</h3>\n        <p> ${image.downloads}</p>\n        </div>   \n        </div>\n        \n      </li>\n    `\n    )\n    .join('');\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImageData } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nconst form = document.querySelector('.form-send-js');\nconst list = document.querySelector('.list-js');\nconst loadMore = document.querySelector('.btn-load');\nconst loader = document.querySelector('.loader');\nconst lightbox = new SimpleLightbox('.gallery-item a');\n\nform.addEventListener('submit', handleSubmit);\nloadMore.addEventListener('click', onLoadMore);\n\nlet page = 1;\nlet totalPages = 0;\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  const searchQuery = event.target.elements.search.value.trim();\n  if (!searchQuery) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search query.' });\n    return;\n  }\n\n  page = 1;\n  list.innerHTML = '';\n  loadMore.classList.add('hidden');\n  showLoader();\n\n  try {\n    const data = await getImageData(searchQuery, page);\n    totalPages = Math.ceil(data.totalHits / 15);\n\n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: 'No results',\n        position: 'topRight',\n        backgroundColor: '#ff4d4f',\n        message:\n          'Sorry, there are no images matching your search query. Please, try again!',\n      });\n    } else {\n      list.innerHTML = createMarkup(data.hits);\n      lightbox.refresh();\n\n      if (page < totalPages) {\n        loadMore.classList.remove('hidden');\n      } else {\n        iziToast.info({\n          title: 'End of Collection',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Try again.',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n  loadMore.disabled = true;\n  showLoader();\n\n  try {\n    const searchQuery = form.elements.search.value.trim();\n    const data = await getImageData(searchQuery, page);\n    list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    lightbox.refresh();\n\n    if (page >= totalPages) {\n      loadMore.classList.add('hidden');\n      iziToast.info({\n        title: 'End of Collection',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    const card = document.querySelector('.gallery-item');\n    if (card) {\n      const cardHeight = card.getBoundingClientRect().height;\n\n      window.scrollBy({\n        left: 0,\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load more images. Try again.',\n    });\n  } finally {\n    loadMore.disabled = false;\n    hideLoader();\n  }\n}\n\nfunction showLoader() {\n  console.log('Показ лоадера');\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n"],"names":["API_KEY","BASE_URL","getImageData","search","page","data","axios","createMarkup","images","image","form","list","loadMore","loader","lightbox","SimpleLightbox","handleSubmit","onLoadMore","totalPages","event","searchQuery","iziToast","showLoader","hideLoader","card","cardHeight"],"mappings":"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"}